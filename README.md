# XY-Plotter

一个非常简易的制图机。使用Processing（上位机）与Arduino（MCU）完成**部分**原定功能
## 功能(原定)

- [ ] 在PC端通过键盘键入、鼠标单击输入数据，以list的方式存储。
- [ ] 用户自主键入或点击list中的数对构建直线与圆。
- [ ] 构建过程中，上位机与MCU在后台建立串口通讯。
- [ ] MCU以查询的方式向上位机索取单次走笔的数据。
- [ ] 上位机确认有绘制任务，则向MCU传输此组数据。
- [ ] MCU解析此数据，并根据任务类型（直线/曲线）分类计算走笔过程。
- [ ] MCU驱动电机与舵机完成单次绘制，并再一次查询。

## 功能（现有）

### Processing（上位机）

#### 主程序 MainSetupProcedure

进行上位机程序中全局变量的声明与其中部分类变量的初始化与实例化。开放串口并设置串口buffer为1。创建GUI中的窗口并显示文字。主循环体中执行显示文字图像的子程序。包含串口中断与键盘中断。

#### 键盘中断状态机 KeyboardInterruption

包括一个判断当前输入过程的状态机，将键盘输入的信息引导至恰当的子程序。

#### 数据输入程序 DataInputProcedure

将从键盘中断中引导来的key用于数据输入过程，并自动生成InputXAxis与InputYAxis两列位对应的变量。并最终作用于状态机。

#### 线条类创建初始化 LineCreation

创建一个LinePointPair类，含有两个方法。

#### 线条数对输入 LineCreationProcedure

将从键盘中断中引导来的key用于线条数对创建过程，并最终作用于状态机。

#### 圆弧类创建初始化 ArcCreation

创建一个CircleAxis类，含有三个方法。创建一个CircleCalculator函数，用于计算圆的参数。

#### 圆弧数组选择 ArcCreationProcedure

将从键盘中断中引导来的key用于圆弧数组创建过程，并最终作用于状态机。

#### 图形显示 GUIProcedure

含有数个子程序用于显示目前输入的数据，并生成调用类方法生成图像。

#### 串口数据推送 SerialDataPush

计量推送次数，在推送数小于数据数时，进行一次推送。（无法乱序进行输入与推送，即在开始推送时所有数据必须均已输入完毕）

#### 串口执行函数 SerialFunctions

包含查询函数与判断函数。

#### 串口中断 SerialInterruption

 中断中包含串口查询的实现基础。

### Arduino（MCU）

#### Main

包含主体变量群的声明与电机的初始化。循环体中包含串口程序。

#### DataPull

查询程序，未加入调用Print过程的语句，导致无法进入打印过程。

#### Print

直线与圆弧的绘制过程。目前圆弧的绘制未写出，WIP。

#### SerialFunctions

串口通讯的接收模块，参考网上的代码。

#### SerialMain

类似状态机，在不同状态下进行直线或曲线的查询行为。

## 期望加入的功能

1. 乱序创建直线圆弧与查询
2. 使用鼠标进行点输入与直线圆弧的创建
3. 绘制圆弧
4. 光标跟随模式
5. ……